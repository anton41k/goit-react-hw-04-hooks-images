(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={modal_backdrop:"Modal_modal_backdrop__1RoqQ",modal_content:"Modal_modal_content__HfuZS",modal_img:"Modal_modal_img__RUJbF"}},13:function(e,t,a){e.exports={photo_card:"ImageGalleryItem_photo_card__2oc7X",photo_img:"ImageGalleryItem_photo_img__rzKbB"}},16:function(e,t,a){e.exports={container_loader:"LoaderGalery_container_loader__1lSHl"}},17:function(e,t,a){e.exports={load_more:"Button_load_more___6meZ",search_btn:"Button_search_btn__1oi_e"}},20:function(e,t,a){e.exports={gallery_list:"GalleryImage_gallery_list__3Ej_w"}},21:function(e,t,a){e.exports={container:"GalleryView_container__3Jn25"}},26:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(5),o=a.n(c),i=(a(26),a(6)),s=a(14),l=a(4),u=(a(27),a(15)),b=a.n(u),m=(a(48),a(16)),d=a.n(m),j=a(2);function f(){return Object(j.jsx)("div",{className:d.a.container_loader,children:Object(j.jsx)(b.a,{type:"Watch",color:"#00BFFF",height:100,width:100})})}var h=a(18),_=a(0),p=a(17),g=a.n(p);function O(e){var t=e.type,a=e.text,n=e.className,r=e.onClick;return Object(j.jsx)("button",{type:t,className:g.a[n],onClick:r,children:a||Object(j.jsx)(_.b.Provider,{value:{size:"1.4em",color:"gray"},children:Object(j.jsx)(h.a,{})})})}var v=a(9),x=a.n(v);function y(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],o=r[1];return Object(j.jsx)("header",{className:x.a.searchbar,children:Object(j.jsxs)("form",{className:x.a.search_form,onSubmit:function(e){e.preventDefault(),t(c),o("")},children:[Object(j.jsx)(O,{type:"submit",className:"search_btn"}),Object(j.jsx)("input",{className:x.a.search_form_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})}var w=a(12),S=a.n(w),k=a(19),C=function(){var e=Object(k.a)(S.a.mark((function e(t){var a,n,r,c,o,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchQuery,n=void 0===a?"":a,r=t.currentPage,c=void 0===r?1:r,o=t.pageSize,i=void 0===o?12:o,"https://pixabay.com/api/","22580473-9722fdac11ed5197610aea928","image_type=photo&orientation=horizontal",s="".concat("https://pixabay.com/api/","?q=").concat(n.trim(),"&page=").concat(c,"&key=").concat("22580473-9722fdac11ed5197610aea928","&").concat("image_type=photo&orientation=horizontal","&per_page=").concat(i),e.next=7,fetch(s);case 7:return l=e.sent,e.next=10,l.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={fetchGallery:C},L=a(10),E=a.n(L),G=document.querySelector("#modal-root");function I(e){var t=e.onClose,a=e.imgModal;Object(n.useEffect)((function(){window.addEventListener("keydown",r),document.body.style.overflow="hidden"}),[]),Object(n.useEffect)((function(){return function(){window.removeEventListener("keydown",r),document.body.style.overflow="visible"}}));var r=function(e){"Escape"===e.code&&t()},o=a.imgUrl,i=a.imgAlt;return Object(c.createPortal)(Object(j.jsx)("div",{className:E.a.modal_backdrop,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(j.jsx)("div",{className:E.a.modal_content,children:Object(j.jsx)("img",{src:o,alt:i,className:E.a.modal_img})})}),G)}var R=a(20),F=a.n(R);function U(e){var t=e.children;return Object(j.jsx)("ul",{className:F.a.gallery_list,children:t})}var z=a(13),B=a.n(z);function M(e){var t=e.gallery,a=e.onClick;return Object(j.jsx)(j.Fragment,{children:t.map((function(e){return Object(j.jsx)("li",{onClick:function(){return a(e)},className:B.a.photo_card,children:Object(j.jsx)("img",{src:e.webformatURL,alt:e.tags,className:B.a.photo_img})},"".concat(e.id).concat(e.webformatURL))}))})}var q=a(21),J=a.n(q),P=a.p+"static/media/loadImg.28fb70f6.gif";function T(){for(var e=[],t=0;t<12;t++){var a={id:"",webformatURL:P,tags:"loading"};a.id=t,e.push(a)}return Object(j.jsx)(M,{gallery:e,onClick:null})}function Q(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),o=Object(l.a)(c,2),u=o[0],b=o[1],m=Object(n.useState)(12),d=Object(l.a)(m,1)[0],h=Object(n.useState)(""),_=Object(l.a)(h,2),p=_[0],g=_[1],v=Object(n.useState)(!1),x=Object(l.a)(v,2),w=x[0],S=x[1],k=Object(n.useState)(!1),C=Object(l.a)(k,2),L=C[0],E=C[1],G=Object(n.useState)(null),R=Object(l.a)(G,2),F=R[0],z=R[1],B=Object(n.useRef)(!0);Object(n.useEffect)((function(){if(""===p&&!B.current)return B.current=!1,i.b.error("Search must not be empty!");""!==p&&q()}),[p]);var q=function(){var e={searchQuery:p,currentPage:u,pageSize:d};S(!0),N.fetchGallery(e).then((function(e){if(!e.hits.length)return i.b.error("The given request ".concat(p," is not available!!!"));r((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e.hits))})),b((function(e){return e+1}))})).catch((function(e){return i.b.error(e)})).finally((function(){S(!1),P(u)}))},P=function(e){if(e>1){var t=document.querySelector("ul").firstElementChild.getBoundingClientRect().height,a=window.pageYOffset;window.scrollTo({top:a+2*t,behavior:"smooth"})}},Q=function(e){if(e){var t={imgUrl:e.largeImageURL,imgAlt:e.tags};z(t)}E(!L)},A=a.length>d-1&&!w;return Object(j.jsxs)("div",{className:J.a.container,children:[Object(j.jsx)(y,{onSubmit:function(e){g(e.trim()),b(1),r([])}}),Object(j.jsx)(U,{children:w?Object(j.jsx)(T,{}):Object(j.jsx)(M,{gallery:a,onClick:Q})}),L&&Object(j.jsx)(I,{onClose:Q,imgModal:F}),w&&Object(j.jsx)(f,{}),A&&Object(j.jsx)(O,{type:"button",onClick:q,text:"Load more",className:"load_more",isLoading:!w})]})}function A(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Q,{}),Object(j.jsx)(i.a,{position:"top-right",autoClose:3e3})]})}o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__3sY2u",search_form:"Searchbar_search_form__2Gn2r",search_form_input:"Searchbar_search_form_input__24v1n"}}},[[51,1,2]]]);
//# sourceMappingURL=main.acbb1943.chunk.js.map