{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/LoaderGalery.module.css","components/Button/Button.module.css","components/GalleryImage/GalleryImage.module.css","view/GalleryView.module.css","components/Loader/LoaderGalery.jsx","components/Button/Button.jsx","components/Searchbar/Searchbar.jsx","services/gallery-api.jsx","components/Modal/Modal.jsx","components/GalleryImage/GalleryImage.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","images/loadImg.gif","components/GalleryPendingView/GalleryPendingView.jsx","view/GalleryView.jsx","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","LoaderGalery","className","css","container_loader","type","color","height","width","Button","text","onClick","Provider","value","size","SearchForm","onSubmit","useState","query","setQuery","searchbar","search_form","e","preventDefault","search_form_input","autoComplete","autoFocus","placeholder","onChange","currentTarget","toLowerCase","fetchGallery","a","searchQuery","currentPage","pageSize","BASE_URL","trim","fetch","response","json","modalRoot","document","querySelector","Modal","onClose","imgModal","useEffect","window","addEventListener","handleKeyDown","body","style","overflow","removeEventListener","code","imgUrl","imgAlt","createPortal","modal_backdrop","event","target","modal_content","src","alt","modal_img","GalleryImage","children","gallery_list","ImageGallery","gallery","map","el","photo_card","webformatURL","tags","photo_img","id","GalleryPendingView","index","galleryRes","loadImg","push","Component","setGallery","setCurrentPage","setSearchQuery","isLoading","setIsLoading","showModal","setShowModal","setImgModal","isFirstRender","useRef","current","toast","error","options","galleryApi","then","data","hits","length","prevState","catch","finally","showScroll","cardHeight","firstElementChild","getBoundingClientRect","yOffset","pageYOffset","scrollTo","top","behavior","toggleModal","img","largeImageURL","shouldRenderLoadMoreButton","container","App","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.acbb1943.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_backdrop\":\"Modal_modal_backdrop__1RoqQ\",\"modal_content\":\"Modal_modal_content__HfuZS\",\"modal_img\":\"Modal_modal_img__RUJbF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"ImageGalleryItem_photo_card__2oc7X\",\"photo_img\":\"ImageGalleryItem_photo_img__rzKbB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container_loader\":\"LoaderGalery_container_loader__1lSHl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load_more\":\"Button_load_more___6meZ\",\"search_btn\":\"Button_search_btn__1oi_e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery_list\":\"GalleryImage_gallery_list__3Ej_w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GalleryView_container__3Jn25\"};","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport css from \"./LoaderGalery.module.css\";\n\nexport default function LoaderGalery() {\n  return (\n    <div className={css.container_loader}>\n      <Loader type=\"Watch\" color=\"#00BFFF\" height={100} width={100} />\n    </div>\n  );\n}\n","import { ImSearch } from \"react-icons/im\";\nimport { IconContext } from \"react-icons\";\n\nimport css from \"./Button.module.css\";\n\nexport default function Button({ type, text, className, onClick }) {\n  return (\n    <button type={type} className={css[className]} onClick={onClick}>\n      {text ? (\n        text\n      ) : (\n        <IconContext.Provider value={{ size: \"1.4em\", color: \"gray\" }}>\n          <ImSearch />\n        </IconContext.Provider>\n      )}\n    </button>\n  );\n}\n","import { useState } from \"react\";\n\nimport Button from \"../Button/Button\";\n\nimport css from \"./Searchbar.module.css\";\n\nexport default function SearchForm({ onSubmit }) {\n  const [query, setQuery] = useState(\"\");\n\n  const handleChange = (e) => {\n    setQuery(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onSubmit(query);\n    setQuery(\"\");\n  };\n\n  return (\n    <header className={css.searchbar}>\n      <form className={css.search_form} onSubmit={handleSubmit}>\n        <Button type=\"submit\" className=\"search_btn\" />\n        <input\n          className={css.search_form_input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={query}\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n","const fetchGallery = async ({\n  searchQuery = \"\",\n  currentPage = 1,\n  pageSize = 12,\n}) => {\n  const url = \"https://pixabay.com/api/\";\n  const key = \"22580473-9722fdac11ed5197610aea928\";\n  const options = \"image_type=photo&orientation=horizontal\";\n  const BASE_URL = `${url}?q=${searchQuery.trim()}&page=${currentPage}&key=${key}&${options}&per_page=${pageSize}`;\n  const response = await fetch(BASE_URL);\n  return await response.json();\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { fetchGallery };\n","import { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport css from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default function Modal({ onClose, imgModal }) {\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    document.body.style.overflow = \"hidden\";\n  }, []);\n\n  useEffect(() => {\n    return function cleanUp() {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      document.body.style.overflow = \"visible\";\n    };\n  });\n\n  const handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      onClose();\n    }\n  };\n\n  const handleBackdropClick = (event) => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n  };\n\n  const { imgUrl, imgAlt } = imgModal;\n  return createPortal(\n    <div className={css.modal_backdrop} onClick={handleBackdropClick}>\n      <div className={css.modal_content}>\n        <img src={imgUrl} alt={imgAlt} className={css.modal_img} />\n      </div>\n    </div>,\n    modalRoot\n  );\n}\n","import css from \"./GalleryImage.module.css\";\n\nexport default function GalleryImage({ children }) {\n  return <ul className={css.gallery_list}>{children}</ul>;\n}\n","import css from \"./ImageGalleryItem.module.css\";\n\nexport default function ImageGallery({ gallery, onClick }) {\n  return (\n    <>\n      {gallery.map((el) => (\n        <li\n          key={`${el.id}${el.webformatURL}`}\n          onClick={() => onClick(el)}\n          className={css.photo_card}\n        >\n          <img src={el.webformatURL} alt={el.tags} className={css.photo_img} />\n        </li>\n      ))}\n    </>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/loadImg.28fb70f6.gif\";","import ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport loadImg from \"../../images/loadImg.gif\";\n\nexport default function GalleryPendingView() {\n  const gallery = [];\n  for (let index = 0; index < 12; index++) {\n    const galleryRes = {\n      id: \"\",\n      webformatURL: loadImg,\n      tags: \"loading\",\n    };\n    galleryRes.id = index;\n    gallery.push(galleryRes);\n  }\n  return <ImageGalleryItem gallery={gallery} onClick={null} />;\n}\n","import { useState, useEffect, useRef } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport LoaderGalery from \"../components/Loader/LoaderGalery\";\nimport Searchbar from \"../components/Searchbar/Searchbar\";\nimport galleryApi from \"../services/gallery-api\";\nimport Button from \"../components/Button/Button\";\nimport Modal from \"../components/Modal/Modal\";\nimport GalleryImage from \"../components/GalleryImage/GalleryImage\";\nimport ImageGalleryItem from \"../components/ImageGalleryItem/ImageGalleryItem\";\n\nimport css from \"./GalleryView.module.css\";\nimport GalleryPendingView from \"../components/GalleryPendingView/GalleryPendingView\";\n\nexport default function Component() {\n  const [gallery, setGallery] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize] = useState(12);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [imgModal, setImgModal] = useState(null);\n\n  const isFirstRender = useRef(true);\n\n  useEffect(() => {\n    if (searchQuery === \"\" && !isFirstRender.current) {\n      isFirstRender.current = false;\n      return toast.error(\"Search must not be empty!\");\n    }\n    if (searchQuery !== \"\") {\n      fetchGallery();\n    }\n  }, [searchQuery]);\n\n  const onChangeQuery = (query) => {\n    setSearchQuery(query.trim());\n    setCurrentPage(1);\n    setGallery([]);\n  };\n\n  const fetchGallery = () => {\n    const options = { searchQuery, currentPage, pageSize };\n\n    setIsLoading(true);\n\n    galleryApi\n      .fetchGallery(options)\n      .then((data) => {\n        if (!data.hits.length) {\n          return toast.error(\n            `The given request ${searchQuery} is not available!!!`\n          );\n        }\n        setGallery((prevState) => [...prevState, ...data.hits]);\n        setCurrentPage((prevState) => prevState + 1);\n      })\n      .catch((error) => toast.error(error))\n      .finally(() => {\n        setIsLoading(false);\n        showScroll(currentPage);\n      });\n  };\n\n  const showScroll = (currentPage) => {\n    if (currentPage > 1) {\n      const cardHeight = document\n        .querySelector(\"ul\")\n        .firstElementChild.getBoundingClientRect().height;\n      const yOffset = window.pageYOffset; // текущее положение скролбара\n      window.scrollTo({\n        top: yOffset + cardHeight * 2,\n        behavior: \"smooth\",\n      });\n    }\n  };\n\n  const toggleModal = (img) => {\n    if (img) {\n      const imgModal = { imgUrl: img.largeImageURL, imgAlt: img.tags };\n      setImgModal(imgModal);\n    }\n    setShowModal(!showModal);\n  };\n\n  const shouldRenderLoadMoreButton =\n    gallery.length > pageSize - 1 && !isLoading;\n  return (\n    <div className={css.container}>\n      <Searchbar onSubmit={onChangeQuery} />\n\n      <GalleryImage>\n        {isLoading ? (\n          <GalleryPendingView />\n        ) : (\n          <ImageGalleryItem gallery={gallery} onClick={toggleModal} />\n        )}\n      </GalleryImage>\n\n      {showModal && <Modal onClose={toggleModal} imgModal={imgModal} />}\n\n      {isLoading && <LoaderGalery />}\n\n      {shouldRenderLoadMoreButton && (\n        <Button\n          type=\"button\"\n          onClick={fetchGallery}\n          text=\"Load more\"\n          className=\"load_more\"\n          isLoading={!isLoading}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { ToastContainer } from \"react-toastify\";\nimport GalleryView from \"./view/GalleryView\";\n\nexport default function App() {\n  return (\n    <>\n      <GalleryView />\n      <ToastContainer position=\"top-right\" autoClose={3000} />\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3sY2u\",\"search_form\":\"Searchbar_search_form__2Gn2r\",\"search_form_input\":\"Searchbar_search_form_input__24v1n\"};"],"sourceRoot":""}